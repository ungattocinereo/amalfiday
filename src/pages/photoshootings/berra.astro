---
import BaseLayout from '../../layouts/BaseLayout.astro'

const heroImage = '/photoshootings/berra/2-berra-new-red.webp'
const heroSlide = {
  src: heroImage,
  alt: 'Berra in a red look in Atrani',
}

const galleryImages = [
  {
    src: '/photoshootings/berra/00002-Berra-in-Atrani-amalfi-scaled.webp',
    alt: 'Berra in Atrani, Amalfi Coast',
  },
  {
    src: '/photoshootings/berra/00004-Berra-in-Atrani-amalfi.webp',
    alt: 'Berra in Atrani with coastal light',
  },
  {
    src: '/photoshootings/berra/00006-Berra-in-Atrani-amalfi-scaled.webp',
    alt: 'Berra fashion frame in Atrani',
  },
  {
    src: '/photoshootings/berra/00001-Berra-in-Atrani-amalfi.webp',
    alt: 'Berra portrait in Atrani streets',
  },
  {
    src: '/photoshootings/berra/00003-Berra-in-Atrani-amalfi-scaled.webp',
    alt: 'Berra overlooking the Amalfi Coast',
  },
]

const storyImages = [
  {
    src: '/photoshootings/berra/2-berra-with-menu-caffe-vittoria.webp',
    alt: 'Berra at Caffe Vittoria in Atrani',
  },
  {
    src: '/photoshootings/berra/2-backtage-berra.webp',
    alt: 'Behind the scenes with Berra in Atrani',
  },
]

const marqueeImages = [heroSlide, ...galleryImages, ...storyImages]

const instagramPost = {
  url: 'https://www.instagram.com/p/CiiYGp3KM9K/',
  author: 'Berra Koyuncu',
  handle: '@berrakoyuncuu',
}
---

<BaseLayout
  title="Berra — Amalfi.Day"
  description="Fashion-forward moments with Instagram model Berra in the heart of Atrani, Amalfi Coast."
>
  <section class="berra-hero">
    <div class="berra-hero__media" style={`background-image:url('${heroImage}')`}></div>
    <div class="container berra-hero__content">
      <div class="berra-hero__text">
        <h1>Berra</h1>
        <p>
          Unveiling the exquisite allure of the Amalfi Coast, our latest fashion photoshoot with the
          effervescent Instagram model, Berra, captures the essence of style and scenic beauty in the
          heart of Atrani. A fusion of fashion-forward looks and the timeless charm of Amalfi’s
          landscapes, every snapshot tells a story of elegance interwoven with the natural grandeur
          of Italy’s divine coastline.
        </p>
      </div>
    </div>
  </section>

  <section class="section berra-intro">
    <div class="container berra-intro__grid">
      <div class="berra-story">
        <h2>
          Style and coastal <span class="accent-italic">elegance</span>
        </h2>
        <p>
          This unique photo-shooting experience not only elevated Berra's Instagram profile but also
          showcased the magnificent tapestry of scenes found in the Amalfi Coast. Each photograph
          tells a story - of fashion, beauty, and the mesmerizing landscapes of Atrani.
        </p>
        <p>
          Discover the beauty and style unveiled in this remarkable photoshoot, and immerse yourself
          in the visual journey of fashion and scenic elegance in the heart of Italy’s enchanting
          Amalfi Coast.
        </p>
      </div>
      <div class="berra-aside">
        <div class="berra-instagram">
          <blockquote
            class="instagram-media"
            data-instgrm-permalink={instagramPost.url}
            data-instgrm-version="14"
          >
            <a href={instagramPost.url} target="_blank" rel="noreferrer">
              A post shared by {instagramPost.author} ({instagramPost.handle})
            </a>
          </blockquote>
        </div>
      </div>
    </div>
  </section>

  <section class="section section--flush">
    <div class="berra-marquee" aria-label="Berra photoshoot gallery">
      <div class="berra-marquee__viewport">
        <div class="berra-marquee__track">
          {marqueeImages.map((image, index) => (
            <figure class="berra-marquee__item">
              <img src={image.src} alt={image.alt} loading={index < 2 ? 'eager' : 'lazy'} />
            </figure>
          ))}
          {marqueeImages.map((image) => (
            <figure class="berra-marquee__item" aria-hidden="true">
              <img src={image.src} alt="" loading="lazy" />
            </figure>
          ))}
        </div>
        <div class="berra-marquee__controls" aria-hidden="false">
          <button
            class="berra-marquee__control"
            type="button"
            data-direction="prev"
            aria-label="Previous photo"
          >
            <i class="bi bi-chevron-left"></i>
          </button>
          <button
            class="berra-marquee__control"
            type="button"
            data-direction="next"
            aria-label="Next photo"
          >
            <i class="bi bi-chevron-right"></i>
          </button>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="berra-thumbs">
        {marqueeImages.map((image) => (
          <img src={image.src} alt={image.alt} loading="lazy" />
        ))}
      </div>
    </div>
  </section>

  <section class="section section--surface">
    <div class="container">
      <div class="berra-highlight">
        <p>
          Berra's Instagram looks great with these amazing photos. The success of the photoshoot
          shows how the right place, fashion, and a good eye can make photos that really stand out
          for their beauty and feel real.
        </p>
      </div>
    </div>
  </section>

  <section class="section berra-cta">
    <div class="container">
      <div class="berra-cta__inner">
        <div>
          <h3>Plan your Amalfi story</h3>
          <p>
            Tell us your vision and we’ll craft a shoot that captures the style, light, and
            landscape that make Amalfi unforgettable.
          </p>
        </div>
        <a class="button" href="/contact">Send a request</a>
      </div>
    </div>
  </section>

  <script is:inline>
    ;(() => {
      const setHeroHeight = () => {
        const hero = document.querySelector('.berra-hero')
        if (!hero) return
        hero.style.setProperty('--hero-vh', `${window.innerHeight}px`)
      }

      setHeroHeight()
      window.addEventListener('resize', setHeroHeight)

      const viewport = document.querySelector('.berra-marquee__viewport')
      const track = document.querySelector('.berra-marquee__track')
      if (!viewport || !track) return

      const halfWidth = () => track.scrollWidth / 2
      const speed = 10
      let rafId = null
      let lastTime = null
      let isPaused = false
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches

      const setInitial = () => {
        viewport.scrollLeft = halfWidth()
      }

      const wrap = () => {
        const max = halfWidth() * 2 - viewport.clientWidth
        if (viewport.scrollLeft <= 0) {
          viewport.scrollLeft += halfWidth()
        } else if (viewport.scrollLeft >= max) {
          viewport.scrollLeft -= halfWidth()
        }
      }

      const step = (time) => {
        if (lastTime === null) lastTime = time
        const delta = time - lastTime
        lastTime = time

        if (!isPaused && !prefersReduced) {
          viewport.scrollLeft -= (speed * delta) / 1000
          wrap()
        }

        rafId = requestAnimationFrame(step)
      }

      const onEnter = () => {
        isPaused = true
      }

      const onLeave = () => {
        isPaused = false
      }

      viewport.addEventListener('mouseenter', onEnter)
      viewport.addEventListener('mouseleave', onLeave)
      viewport.addEventListener('touchstart', onEnter, { passive: true })
      viewport.addEventListener('touchend', onLeave)
      viewport.addEventListener('pointerdown', onEnter)
      viewport.addEventListener('pointerup', onLeave)
      viewport.addEventListener('scroll', wrap, { passive: true })

      const controls = Array.from(document.querySelectorAll('.berra-marquee__control'))
      controls.forEach((button) => {
        button.addEventListener('click', () => {
          const direction = button.dataset.direction === 'prev' ? -1 : 1
          const amount = viewport.clientWidth * 0.6
          viewport.scrollBy({ left: direction * amount, behavior: 'smooth' })
        })
      })

      window.addEventListener('load', setInitial)
      setInitial()
      rafId = requestAnimationFrame(step)

      window.addEventListener('beforeunload', () => {
        if (rafId) cancelAnimationFrame(rafId)
      })

      if (!document.getElementById('instagram-embed')) {
        const script = document.createElement('script')
        script.id = 'instagram-embed'
        script.src = 'https://www.instagram.com/embed.js'
        script.async = true
        script.onload = () => window.instgrm?.Embeds?.process()
        document.body.appendChild(script)
      } else {
        window.instgrm?.Embeds?.process()
      }
    })()
  </script>
</BaseLayout>

<style>
  .berra-hero {
    position: relative;
    min-height: 100svh;
    height: var(--hero-vh, 100vh);
    display: flex;
    align-items: center;
    color: #ffffff;
    overflow: hidden;
  }

  .berra-hero__media {
    position: absolute;
    inset: 0;
    background-size: cover;
    background-position: center;
    filter: brightness(0.6);
    transform: scale(1.03);
  }

  .berra-hero::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(120deg, rgba(7, 10, 16, 0.78), rgba(7, 10, 16, 0.15));
  }

  .berra-hero__content {
    position: relative;
    z-index: 2;
  }

  .berra-hero__text {
    max-width: 720px;
    text-align: left;
  }

  .berra-hero__text h1 {
    font-size: clamp(2.6rem, 5vw, 4.6rem);
    margin-bottom: 1rem;
  }

  .berra-hero__text p {
    color: rgba(255, 255, 255, 0.82);
  }

  .berra-intro {
    padding-top: 4.5rem;
  }

  .berra-intro__grid {
    display: grid;
    gap: 2rem;
    grid-template-columns: minmax(0, 1.15fr) minmax(0, 0.85fr);
    align-items: start;
  }

  .berra-story h2 {
    font-size: clamp(2rem, 3vw, 3rem);
    margin-bottom: 1rem;
  }

  .berra-aside {
    display: grid;
    gap: 1.5rem;
  }

  .berra-instagram {
    padding: 0;
    display: block;
    background: transparent;
    border: none;
    box-shadow: none;
  }

  .berra-instagram .instagram-media {
    margin: 0 !important;
    width: 100% !important;
    max-width: 100% !important;
  }

  .section--flush {
    padding-top: 0;
  }

  .section--surface {
    background: var(--color-surface);
  }

  .berra-marquee {
    display: grid;
    gap: 1.5rem;
    width: 100vw;
    margin-left: 50%;
    transform: translateX(-50%);
    overflow-x: clip;
  }

  .berra-marquee__viewport {
    position: relative;
    overflow-x: auto;
    overflow-y: hidden;
    border-radius: 0;
    box-shadow: var(--shadow-soft);
    scroll-behavior: smooth;
    scrollbar-width: none;
    -ms-overflow-style: none;
    cursor: grab;
    overscroll-behavior-x: contain;
    -webkit-overflow-scrolling: touch;
  }

  .berra-marquee__viewport::-webkit-scrollbar {
    display: none;
  }

  .berra-marquee__viewport:active {
    cursor: grabbing;
  }

  .berra-marquee__viewport::before,
  .berra-marquee__viewport::after {
    content: '';
    position: absolute;
    top: 0;
    bottom: 0;
    width: 120px;
    pointer-events: none;
    z-index: 1;
  }

  .berra-marquee__viewport::before {
    left: 0;
    background: linear-gradient(90deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0));
  }

  .berra-marquee__viewport::after {
    right: 0;
    background: linear-gradient(270deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0));
  }

  :global([data-theme='night']) .berra-marquee__viewport::before {
    background: linear-gradient(90deg, rgba(15, 17, 21, 0.95), rgba(15, 17, 21, 0));
  }

  :global([data-theme='night']) .berra-marquee__viewport::after {
    background: linear-gradient(270deg, rgba(15, 17, 21, 0.95), rgba(15, 17, 21, 0));
  }

  .berra-marquee__track {
    display: flex;
    gap: 1.5rem;
    width: max-content;
  }

  .berra-marquee__item {
    margin: 0;
    width: min(64vw, 680px);
    aspect-ratio: 4 / 3;
    flex: 0 0 auto;
    border-radius: 20px;
    overflow: hidden;
  }

  .berra-marquee__item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .berra-thumbs {
    display: flex;
    gap: 0.8rem;
    overflow-x: auto;
    padding-bottom: 0.4rem;
    margin-top: 1.5rem;
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .berra-thumbs::-webkit-scrollbar {
    display: none;
  }

  .berra-thumbs img {
    width: 120px;
    height: 84px;
    object-fit: cover;
    border-radius: 14px;
    box-shadow: var(--shadow-soft);
  }

  .berra-marquee__controls {
    position: absolute;
    inset: 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 1.5rem;
    pointer-events: none;
  }

  .berra-marquee__control {
    pointer-events: auto;
    width: 46px;
    height: 46px;
    border-radius: 50%;
    border: none;
    background: rgba(255, 255, 255, 0.85);
    box-shadow: var(--shadow-soft);
    color: var(--color-text);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .berra-marquee__control:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lift);
  }

  .berra-highlight {
    max-width: 820px;
    margin: 0 auto;
    text-align: center;
    padding: 2.5rem 2rem;
    border-radius: 20px;
    background: var(--color-card);
    box-shadow: var(--shadow-soft);
    font-size: clamp(1.05rem, 2vw, 1.3rem);
  }

  .berra-highlight p {
    color: var(--color-text);
    margin: 0;
  }

  .berra-cta {
    padding-top: 3.5rem;
  }

  .berra-cta__inner {
    display: flex;
    justify-content: space-between;
    gap: 2rem;
    padding: 2.5rem 3rem;
    border-radius: 24px;
    background: linear-gradient(120deg, rgba(255, 89, 0, 0.12), rgba(1, 98, 255, 0.12));
    align-items: center;
  }

  .berra-cta__inner h3 {
    margin-bottom: 0.6rem;
  }

  .berra-cta__inner p {
    margin: 0;
  }

  @media (max-width: 960px) {
    .berra-intro__grid {
      grid-template-columns: 1fr;
    }

    .berra-marquee__item {
      width: min(72vw, 560px);
      aspect-ratio: 4 / 3;
    }

    .berra-cta__inner {
      flex-direction: column;
      align-items: flex-start;
    }
  }

  @media (max-width: 720px) {
    .berra-hero {
      min-height: 70vh;
    }

    .berra-marquee__item {
      width: 78vw;
      aspect-ratio: 4 / 3;
    }

    .berra-marquee__controls {
      padding: 0 0.8rem;
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .berra-marquee__viewport {
      scroll-behavior: auto;
    }
  }
</style>
