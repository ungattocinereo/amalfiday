---
import BaseLayout from '../layouts/BaseLayout.astro'

const pageTitle = 'Contact — CristallPont Amalfi Day'
const pageDescription =
  'Contact Amalfi.Day for Booking.com & Airbnb stays, concierge services, and Amalfi Coast photoshoots.'
const shareImage = '/photoshootings/hero/couple/02-slideshow-regan-walk-ravello-love-1024x682.webp'
const heroImage = '/staticpages/contact/contact-us.webp'

const whatsappNumber = import.meta.env.PUBLIC_WHATSAPP_PHONE || ''
const whatsappDigits = whatsappNumber ? whatsappNumber.replace(/[^\d]/g, '') : ''
const whatsappHref = whatsappDigits ? `https://wa.me/${whatsappDigits}` : 'https://wa.me/'
---

<BaseLayout title={pageTitle} description={pageDescription} image={shareImage}>
  <section class="contact-hero hero--dark">
    <div class="contact-hero__media">
      <img
        class="contact-hero__image"
        src={heroImage}
        alt="Amalfi coast cliffside and sea"
        loading="eager"
        fetchpriority="high"
      />
    </div>
    <div class="contact-hero__veil" aria-hidden="true"></div>
    <div class="contact-hero__glow" aria-hidden="true"></div>
    <div class="container contact-hero__content">
      <div class="contact-hero__copy">
        <span class="badge contact-hero__badge">
          <i class="bi bi-chat-heart"></i> Contact Amalfi.Day
        </span>
        <h1>
          Contact us <span class="accent-italic">right now</span>
        </h1>
        <p class="contact-hero__lead">
          Tell us your dates, mood, and priorities. We will craft a custom plan for your Amalfi
          Coast stay, photoshoot, or concierge request and reply within 24 hours.
        </p>
        <div class="contact-hero__actions">
          <a class="button" href="#contact-form">
            <i class="bi bi-send"></i> Send a request
          </a>
          <a class="button button--ghost" href={whatsappHref} target="_blank" rel="noreferrer">
            <i class="bi bi-whatsapp"></i> WhatsApp
          </a>
        </div>
        <p class="contact-hero__note">
          Prefer WhatsApp? <a href={whatsappHref} target="_blank" rel="noreferrer">Start a chat</a>.
        </p>
      </div>
    </div>
  </section>

  <section class="section contact-book">
    <div class="container contact-book__inner">
      <div class="contact-eyebrow">WHERE WE BOOK</div>
      <h1>
        Amalfi Coast stays on <span class="accent-italic">Booking.com</span> &
        <span class="accent-italic">Airbnb</span>
      </h1>
      <p>
        Most accommodation reservations are arranged through
        <a href="https://www.booking.com/" target="_blank" rel="noreferrer">Booking.com</a>
        and
        <a href="https://www.airbnb.com/" target="_blank" rel="noreferrer">Airbnb</a>.
        Our apartments are listed on these platforms, so you can book them quickly and securely.
        We send direct links to trusted listings and help compare options in Amalfi, Positano,
        Ravello, and Atrani so you can book with confidence.
      </p>
      <p>
        Beyond stays, we handle every detail: taxi and private transfers, porter support for
        luggage, as well as masterclasses, local tastings, and curated experiences. Tell us what
        you need and we will coordinate the rest.
      </p>
    </div>
  </section>

  <section class="section contact-help">
    <div class="container">
      <h1>How we can help</h1>
      <div class="contact-help__grid">
        <article class="contact-help__card">
          <div class="contact-help__media">
            <img src="/staticpages/contact/transfers.webp" alt="Private transfers on the Amalfi Coast" />
          </div>
          <div class="contact-help__content">
            <h3>Transfers & taxis</h3>
            <p>Private drivers, airport pickups, and day-trip routing built around your schedule.</p>
          </div>
        </article>
        <article class="contact-help__card">
          <div class="contact-help__media">
            <img src="/staticpages/contact/porters.webp" alt="Porter service assistance" />
          </div>
          <div class="contact-help__content">
            <h3>Porters & luggage help</h3>
            <p>Porter service for steep streets, ferry arrivals, and hotel transitions.</p>
          </div>
        </article>
        <article class="contact-help__card">
          <div class="contact-help__media">
            <img src="/staticpages/contact/masterclasses.webp" alt="Local masterclasses and tastings" />
          </div>
          <div class="contact-help__content">
            <h3>Workshops & masterclasses</h3>
            <p>Cooking classes, ceramic workshops, and tasting experiences with local artisans.</p>
          </div>
        </article>
        <article class="contact-help__card">
          <div class="contact-help__media">
            <img src="/staticpages/contact/photoshootings.webp" alt="Amalfi Coast photo planning" />
          </div>
          <div class="contact-help__content">
            <h3>Photo planning</h3>
            <p>Golden-hour timing, location permits, and a calm, guided shoot experience.</p>
          </div>
        </article>
      </div>
    </div>
  </section>

  <section class="section contact-plan" id="contact-form">
    <div class="container contact-plan__grid">
      <div class="contact-plan__intro">
        <div class="contact-eyebrow">PLAN WITH US</div>
        <h1>
          Let’s design your <span class="accent-italic">Amalfi</span> story
        </h1>
        <p>
          Share your dates, mood, and wishlist. We will build a tailored plan with the best light,
          locations, and timing for an effortless Amalfi Coast experience.
        </p>
        <div class="contact__links">
          <a class="contact-link" href={whatsappHref} target="_blank" rel="noreferrer">
            <span class="contact-link__icon"><i class="bi bi-whatsapp"></i></span>
            <span class="contact-link__text">
              <strong>WhatsApp</strong>
              <span>Send a message on WhatsApp</span>
            </span>
          </a>
          <a class="contact-link" href="mailto:hello@amalfi.day">
            <span class="contact-link__icon"><i class="bi bi-envelope"></i></span>
            <span class="contact-link__text">
              <strong>Email</strong>
              <span>Write us an email</span>
            </span>
          </a>
        </div>
      </div>

      <form class="contact-form" action="/api/contact" method="post">
        <div class="contact-form__body">
          <div class="contact-form__header">
            <span class="badge"><i class="bi bi-stars"></i> Telegram-ready request</span>
            <h2>
              Send your <span class="accent-italic">plan</span> in minutes
            </h2>
            <p>
              Fill in the details below. Your request goes straight to Telegram so we can reply
              quickly with availability, pricing, and suggestions.
            </p>
          </div>
          <div class="contact-form__grid">
            <label>
              Your name
              <input type="text" name="name" placeholder="Iana" autocomplete="name" />
            </label>
            <label>
              Email or WhatsApp
              <input
                type="text"
                name="contact"
                placeholder="email or +39"
                autocomplete="email"
                required
              />
            </label>
            <label>
              Dates & location
              <input type="text" name="dates" placeholder="Oct 3–7, Atrani" required />
            </label>
            <label class="service-field">
              Service
              <div class="service-select" data-placeholder="Select a service">
                <span class="service-select__icon">
                  <i class="bi bi-grid-3x3-gap"></i>
                </span>
                <input
                  class="service-select__input"
                  type="text"
                  name="service"
                  placeholder="Select a service"
                  readonly
                  required
                />
                <button
                  class="service-select__toggle"
                  type="button"
                  aria-expanded="false"
                  aria-label="Open service list"
                >
                  <i class="bi bi-chevron-down"></i>
                </button>
                <div class="service-select__menu" role="listbox">
                  <button
                    class="service-select__option"
                    type="button"
                    data-value="Porters/taxi"
                    data-icon="bi-car-front-fill"
                    role="option"
                    aria-selected="false"
                  >
                    <i class="bi bi-car-front-fill"></i>
                    <span>Porters/taxi</span>
                  </button>
                  <button
                    class="service-select__option"
                    type="button"
                    data-value="Photoshooting"
                    data-icon="bi-camera"
                    role="option"
                    aria-selected="false"
                  >
                    <i class="bi bi-camera"></i>
                    <span>Photoshooting</span>
                  </button>
                  <button
                    class="service-select__option"
                    type="button"
                    data-value="Apartment"
                    data-icon="bi-house-heart"
                    role="option"
                    aria-selected="false"
                  >
                    <i class="bi bi-house-heart"></i>
                    <span>Apartment</span>
                  </button>
                  <button
                    class="service-select__option"
                    type="button"
                    data-value="Other"
                    data-icon="bi-stars"
                    role="option"
                    aria-selected="false"
                  >
                    <i class="bi bi-stars"></i>
                    <span>Other</span>
                  </button>
                </div>
              </div>
            </label>
          </div>
          <label>
            Your message
            <textarea name="message" rows="5" placeholder="Tell us about your plans"></textarea>
          </label>
          <button class="button" type="submit">
            <i class="bi bi-send"></i> Send request
          </button>
          <p class="form__status" aria-live="polite">
            We will send your request directly to Telegram.
          </p>
        </div>

        <div class="contact-form__success" role="status" aria-live="polite" aria-hidden="true">
          <div class="contact-form__success-inner">
            <div class="contact-form__envelope" aria-hidden="true">
              <div class="contact-form__envelope-letter"></div>
              <div class="contact-form__envelope-seal">
                <i class="bi bi-check-lg"></i>
              </div>
            </div>
            <div class="contact-form__success-text">
              <h3>Thank you</h3>
              <p>Your form was submited and delivered.</p>
              <a class="contact-form__reset" href="#">Do you want to send another one?</a>
            </div>
          </div>
        </div>
      </form>
    </div>
  </section>

  <script>
    const form = document.querySelector('.contact-form')
    const status = document.querySelector('.form__status')
    const submitButton = form?.querySelector('button[type="submit"]')
    const successPanel = form?.querySelector('.contact-form__success')
    const resetLink = form?.querySelector('.contact-form__reset')

    const serviceSelect = form?.querySelector('.service-select')
    const serviceInput = serviceSelect?.querySelector('.service-select__input')
    const serviceToggle = serviceSelect?.querySelector('.service-select__toggle')
    const serviceIcon = serviceSelect?.querySelector('.service-select__icon i')
    const serviceOptions = serviceSelect?.querySelectorAll('.service-select__option')

    const setStatus = (text, state) => {
      if (!status) return
      status.textContent = text
      status.dataset.state = state || ''
    }

    const openServiceSelect = () => {
      if (!serviceSelect) return
      serviceSelect.classList.add('is-open')
      serviceToggle?.setAttribute('aria-expanded', 'true')
    }

    const closeServiceSelect = () => {
      if (!serviceSelect) return
      serviceSelect.classList.remove('is-open')
      serviceToggle?.setAttribute('aria-expanded', 'false')
    }

    const resetServiceSelect = () => {
      if (!serviceSelect || !serviceInput) return
      serviceInput.value = ''
      serviceInput.setCustomValidity('')
      serviceSelect.classList.remove('has-value', 'is-invalid')
      if (serviceIcon) {
        serviceIcon.className = 'bi bi-grid-3x3-gap'
      }
      serviceOptions?.forEach((option) => option.setAttribute('aria-selected', 'false'))
      closeServiceSelect()
    }

    const applyServiceChoice = (option) => {
      if (!serviceSelect || !serviceInput) return
      const value = option?.dataset?.value || option?.textContent?.trim()
      const icon = option?.dataset?.icon
      if (!value) return
      serviceInput.value = value
      serviceInput.setCustomValidity('')
      serviceSelect.classList.add('has-value')
      serviceSelect.classList.remove('is-invalid')
      if (serviceIcon && icon) {
        serviceIcon.className = `bi ${icon}`
      }
      serviceOptions?.forEach((item) => {
        item.setAttribute('aria-selected', item === option ? 'true' : 'false')
      })
      closeServiceSelect()
    }

    serviceToggle?.addEventListener('click', (event) => {
      event.preventDefault()
      if (serviceSelect?.classList.contains('is-open')) {
        closeServiceSelect()
      } else {
        openServiceSelect()
      }
    })

    serviceInput?.addEventListener('click', (event) => {
      event.preventDefault()
      if (serviceSelect?.classList.contains('is-open')) {
        closeServiceSelect()
      } else {
        openServiceSelect()
      }
    })

    serviceOptions?.forEach((option) => {
      option.addEventListener('click', () => applyServiceChoice(option))
    })

    document.addEventListener('click', (event) => {
      if (!serviceSelect || serviceSelect.contains(event.target)) return
      closeServiceSelect()
    })

    document.addEventListener('keydown', (event) => {
      if (event.key === 'Escape') {
        closeServiceSelect()
      }
    })

    const showSuccessState = () => {
      if (!form) return
      form.classList.add('is-success')
      successPanel?.setAttribute('aria-hidden', 'false')
    }

    const clearSuccessState = () => {
      if (!form) return
      form.classList.remove('is-success', 'is-resetting')
      successPanel?.setAttribute('aria-hidden', 'true')
    }

    resetLink?.addEventListener('click', (event) => {
      event.preventDefault()
      if (!form) return
      form.classList.add('is-resetting')
      window.setTimeout(() => {
        clearSuccessState()
        setStatus('We will send your request directly to Telegram.')
      }, 450)
    })

    form?.addEventListener('submit', async (event) => {
      event.preventDefault()
      if (serviceInput && !serviceInput.value) {
        serviceInput.setCustomValidity('Please select a service.')
        serviceSelect?.classList.add('is-invalid')
      } else if (serviceInput) {
        serviceInput.setCustomValidity('')
        serviceSelect?.classList.remove('is-invalid')
      }

      if (!form.reportValidity()) {
        if (serviceSelect?.classList.contains('is-invalid')) {
          openServiceSelect()
        }
        return
      }

      setStatus('Sending your request...')
      if (submitButton) submitButton.disabled = true

      const formData = new FormData(form)
      const payload = Object.fromEntries(formData.entries())

      try {
        const response = await fetch('/api/contact', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload),
        })

        if (!response.ok) {
          throw new Error('Request failed')
        }

        form.reset()
        resetServiceSelect()
        setStatus('Thank you! We will get back to you shortly.', 'success')
        showSuccessState()
      } catch (error) {
        clearSuccessState()
        setStatus('Sorry, something went wrong. Please email hello@amalfi.day.', 'error')
      } finally {
        if (submitButton) submitButton.disabled = false
      }
    })
  </script>
</BaseLayout>

<style>
  .contact-hero {
    position: relative;
    min-height: 100svh;
    display: grid;
    align-items: stretch;
    color: #ffffff;
    overflow: hidden;
    background: #0f1115;
  }

  .contact-hero__media {
    position: absolute;
    inset: 0;
    z-index: 0;
  }

  .contact-hero__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center top;
    filter: saturate(1.05) contrast(1.02);
  }

  .contact-hero__veil {
    position: absolute;
    inset: 0;
    z-index: 1;
    background: linear-gradient(
      180deg,
      rgba(10, 12, 15, 0.35) 0%,
      rgba(10, 12, 15, 0.72) 55%,
      rgba(10, 12, 15, 0.92) 100%
    );
  }

  .contact-hero__glow {
    position: absolute;
    inset: 0;
    z-index: 1;
    background: radial-gradient(circle at 20% 20%, rgba(255, 195, 0, 0.35), transparent 45%),
      radial-gradient(circle at 80% 10%, rgba(0, 156, 255, 0.28), transparent 45%);
    mix-blend-mode: screen;
    opacity: 0.7;
  }

  .contact-hero__content {
    position: relative;
    z-index: 2;
    min-height: 100svh;
    padding: calc(var(--header-space) + 1.5rem) 0 4rem;
    display: grid;
    align-items: center;
    justify-items: start;
  }

  .contact-hero__badge {
    background: rgba(15, 17, 21, 0.65);
    color: #ffffff;
    border: 1px solid rgba(255, 255, 255, 0.15);
  }

  .contact-hero__copy {
    max-width: 640px;
    justify-self: start;
    text-align: left;
  }

  .contact-hero__copy h1 {
    font-size: clamp(3rem, 7vw, 4.8rem);
    margin-bottom: 1rem;
  }

  .contact-hero__lead {
    font-size: 1.1rem;
    color: rgba(255, 255, 255, 0.85);
  }

  .contact-hero__actions {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    margin-top: 1.6rem;
  }

  .contact-hero__note {
    margin-top: 1.2rem;
    color: rgba(255, 255, 255, 0.7);
  }

  .contact-hero__note a {
    color: #ffffff;
    font-weight: 600;
  }

  .button--ghost {
    background: rgba(15, 17, 21, 0.45);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #ffffff;
  }

  .contact-book__inner {
    max-width: 860px;
    display: grid;
    gap: 1.2rem;
  }

  .contact-book__inner .contact-eyebrow {
    margin-bottom: 0.4rem;
  }

  .contact-eyebrow {
    font-family: var(--font-mono);
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.2em;
    color: var(--color-text-muted);
    margin-bottom: 1rem;
  }

  .contact-help h1 {
    margin-bottom: 2rem;
  }

  .contact-help__grid {
    display: grid;
    grid-template-columns: repeat(4, minmax(0, 1fr));
    gap: 1.4rem;
  }

  .contact-help__card {
    padding: 0;
    border-radius: var(--radius-lg);
    background: linear-gradient(135deg, rgba(255, 195, 0, 0.08), transparent 55%),
      var(--color-card);
    border: 1px solid var(--color-border);
    box-shadow: var(--shadow-soft);
    overflow: hidden;
  }

  .contact-help__media {
    width: 100%;
    aspect-ratio: 4 / 3;
    overflow: hidden;
  }

  .contact-help__media img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .contact-help__content {
    padding: 1.6rem;
    display: grid;
    gap: 0.8rem;
  }

  .contact-help__card h3 {
    margin: 0;
  }

  .contact-plan__grid {
    display: grid;
    grid-template-columns: minmax(0, 0.9fr) minmax(0, 1.1fr);
    gap: 3rem;
    align-items: start;
  }

  .contact__links {
    display: grid;
    gap: 1.2rem;
    margin-top: 1.5rem;
  }

  .contact-link {
    display: grid;
    grid-template-columns: auto 1fr;
    align-items: center;
    gap: 1rem;
    color: var(--color-text);
    text-decoration: none;
  }

  .contact-link__icon {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    display: grid;
    place-items: center;
    font-size: 1.5rem;
    background: rgba(1, 98, 255, 0.12);
    color: var(--color-aux);
  }

  .contact-link__text {
    display: grid;
    gap: 0.2rem;
  }

  .contact-link__text strong {
    font-size: 1rem;
  }

  .contact-link__text span {
    color: var(--color-text-muted);
    font-size: 0.95rem;
  }

  .contact-form {
    width: 100%;
    padding: 3rem;
    border-radius: 32px;
    background: linear-gradient(140deg, rgba(255, 255, 255, 0.96), rgba(255, 255, 255, 0.9));
    box-shadow: 0 30px 60px rgba(10, 12, 15, 0.12);
    position: relative;
    text-align: left;
    overflow: hidden;
    transition: background 0.6s ease, box-shadow 0.6s ease;
  }

  .contact-form.is-success {
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.98), rgba(252, 244, 232, 0.95));
    box-shadow: 0 35px 70px rgba(10, 12, 15, 0.16);
  }

  .contact-form__body {
    display: flex;
    flex-direction: column;
    gap: 1.2rem;
    position: relative;
    z-index: 2;
    transition: opacity 0.45s ease, transform 0.6s ease, filter 0.6s ease;
  }

  .contact-form.is-success .contact-form__body {
    opacity: 0;
    transform: translateY(16px) scale(0.98);
    filter: blur(2px);
    pointer-events: none;
  }

  .contact-form.is-resetting .contact-form__body {
    opacity: 1;
    transform: translateY(0) scale(1);
    filter: none;
    pointer-events: auto;
  }

  .contact-form__header {
    display: grid;
    gap: 0.6rem;
    justify-items: start;
  }

  .contact-form::before {
    content: '';
    position: absolute;
    inset: -1px;
    border-radius: 34px;
    padding: 1px;
    background: linear-gradient(135deg, rgba(255, 89, 0, 0.45), rgba(0, 156, 255, 0.35));
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    pointer-events: none;
  }

  .contact-form::after {
    content: '';
    position: absolute;
    right: -20%;
    top: -25%;
    width: 260px;
    height: 260px;
    background: radial-gradient(circle, rgba(255, 195, 0, 0.22), transparent 70%);
    opacity: 0.8;
    pointer-events: none;
  }

  .contact-form__grid {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 1rem 1.2rem;
  }

  .service-field {
    position: relative;
  }

  .service-select {
    position: relative;
    display: flex;
    align-items: center;
  }

  .service-select__icon {
    position: absolute;
    left: 1rem;
    font-size: 1.1rem;
    color: var(--color-aux);
    pointer-events: none;
  }

  .service-select__input {
    width: 100%;
    padding-left: 2.8rem;
    padding-right: 3rem;
    cursor: pointer;
  }

  .service-select:not(.has-value) .service-select__input {
    color: var(--color-text-muted);
  }

  .service-select__toggle {
    position: absolute;
    right: 0.75rem;
    top: 50%;
    transform: translateY(-50%);
    border: none;
    background: transparent;
    color: rgba(26, 26, 26, 0.6);
    display: grid;
    place-items: center;
    font-size: 1.1rem;
    padding: 0.2rem;
    cursor: pointer;
  }

  .service-select__toggle i {
    transition: transform 0.2s ease;
  }

  .service-select.is-open .service-select__toggle i {
    transform: rotate(180deg);
  }

  .service-select__menu {
    position: absolute;
    z-index: 20;
    left: 0;
    right: 0;
    top: calc(100% + 0.6rem);
    background: #ffffff;
    border: 1px solid rgba(26, 26, 26, 0.1);
    border-radius: 16px;
    padding: 0.4rem;
    box-shadow: 0 22px 40px rgba(10, 12, 15, 0.12);
    display: grid;
    gap: 0.2rem;
    opacity: 0;
    transform: translateY(-8px);
    pointer-events: none;
    transition: opacity 0.2s ease, transform 0.2s ease;
  }

  .service-select.is-open .service-select__menu {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
  }

  .service-select__option {
    border: none;
    background: transparent;
    border-radius: 12px;
    padding: 0.65rem 0.8rem;
    display: flex;
    align-items: center;
    gap: 0.6rem;
    font: inherit;
    color: var(--color-text);
    cursor: pointer;
    text-align: left;
  }

  .service-select__option i {
    font-size: 1.1rem;
    color: var(--color-aux);
  }

  .service-select__option:hover,
  .service-select__option[aria-selected='true'] {
    background: rgba(1, 98, 255, 0.08);
  }

  .service-select.is-invalid .service-select__input {
    border-color: rgba(192, 53, 43, 0.6);
    box-shadow: 0 0 0 3px rgba(192, 53, 43, 0.12);
  }

  label {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    font-weight: 600;
    color: var(--color-text);
  }

  input,
  textarea,
  select {
    border: 1px solid rgba(26, 26, 26, 0.12);
    border-radius: 14px;
    padding: 0.85rem 1rem;
    font-family: var(--font-body);
    background: rgba(255, 255, 255, 0.9);
    color: var(--color-text);
    transition: border 0.2s ease, box-shadow 0.2s ease;
  }

  input:focus,
  textarea:focus,
  select:focus,
  .service-select:focus-within .service-select__input {
    outline: none;
    border-color: rgba(1, 98, 255, 0.5);
    box-shadow: 0 0 0 3px rgba(1, 98, 255, 0.15);
  }

  select {
    appearance: none;
    background-image: linear-gradient(45deg, transparent 50%, rgba(26, 26, 26, 0.6) 50%),
      linear-gradient(135deg, rgba(26, 26, 26, 0.6) 50%, transparent 50%),
      linear-gradient(to right, rgba(26, 26, 26, 0.08), rgba(26, 26, 26, 0.08));
    background-position: calc(100% - 1.2rem) calc(50% + 2px), calc(100% - 0.95rem) calc(50% + 2px),
      calc(100% - 2.4rem) 50%;
    background-size: 8px 8px, 8px 8px, 1px 1.8rem;
    background-repeat: no-repeat;
    padding-right: 2.8rem;
  }

  .contact-form .button {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    width: fit-content;
  }

  .contact-form .button:disabled {
    opacity: 0.7;
    cursor: progress;
  }

  .contact-form__success {
    position: absolute;
    inset: 0;
    display: grid;
    place-items: center;
    text-align: center;
    padding: 2.4rem;
    opacity: 0;
    transform: translateY(24px) scale(0.98);
    transition: opacity 0.5s ease, transform 0.6s ease;
    pointer-events: none;
    z-index: 3;
  }

  .contact-form.is-success .contact-form__success {
    opacity: 1;
    transform: translateY(0) scale(1);
    pointer-events: auto;
  }

  .contact-form.is-resetting .contact-form__success {
    opacity: 0;
    transform: translateY(24px) scale(0.98);
    pointer-events: none;
  }

  .contact-form__success-inner {
    display: grid;
    gap: 1.4rem;
    justify-items: center;
  }

  .contact-form__envelope {
    width: min(360px, 78%);
    aspect-ratio: 3 / 2;
    border-radius: 20px;
    background: linear-gradient(165deg, #fff7ed, #f1dfc9);
    position: relative;
    box-shadow: 0 24px 48px rgba(12, 8, 0, 0.18);
    overflow: hidden;
    transform: translateY(12px) scale(0.96);
    transition: transform 0.7s ease;
  }

  .contact-form.is-success .contact-form__envelope {
    transform: translateY(0) scale(1);
  }

  .contact-form__envelope::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, transparent 49%, rgba(232, 214, 193, 0.92) 51%) left
        bottom / 50% 62% no-repeat,
      linear-gradient(225deg, transparent 49%, rgba(232, 214, 193, 0.92) 51%) right bottom / 50%
        62% no-repeat;
  }

  .contact-form__envelope::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(45deg, transparent 49%, rgba(255, 255, 255, 0.92) 51%) left top /
        50% 58% no-repeat,
      linear-gradient(-45deg, transparent 49%, rgba(255, 255, 255, 0.92) 51%) right top / 50% 58%
        no-repeat;
    transform-origin: top center;
    transform: translateY(-8%) scaleY(0.9);
    transition: transform 0.6s ease;
  }

  .contact-form.is-success .contact-form__envelope::after {
    transform: translateY(-18%) scaleY(0.9);
  }

  .contact-form__envelope-letter {
    position: absolute;
    left: 10%;
    right: 10%;
    bottom: 12%;
    height: 50%;
    border-radius: 14px;
    background: #fffdf8;
    box-shadow: inset 0 0 0 1px rgba(210, 188, 162, 0.5);
  }

  .contact-form__envelope-seal {
    position: absolute;
    left: 50%;
    top: 50%;
    width: 70px;
    height: 70px;
    transform: translate(-50%, -50%) scale(0.3);
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, #ffb37a, #ff7a1a 70%);
    display: grid;
    place-items: center;
    color: #ffffff;
    font-size: 2rem;
    box-shadow: 0 14px 30px rgba(255, 122, 26, 0.45);
    opacity: 0;
    transition: transform 0.5s ease 0.2s, opacity 0.5s ease 0.2s;
  }

  .contact-form__envelope-seal::after {
    content: '';
    position: absolute;
    inset: 8px;
    border-radius: 50%;
    border: 1px solid rgba(255, 255, 255, 0.7);
  }

  .contact-form.is-success .contact-form__envelope-seal {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }

  .contact-form__success-text {
    display: grid;
    gap: 0.4rem;
  }

  .contact-form__success-text h3 {
    margin: 0;
    font-size: 2rem;
  }

  .contact-form__success-text p {
    margin: 0;
    color: var(--color-text-muted);
  }

  .contact-form__reset {
    color: var(--color-aux);
    font-weight: 600;
    text-decoration: underline;
    text-decoration-thickness: 2px;
    text-underline-offset: 4px;
  }

  .form__status {
    margin: 0.2rem 0 0;
    color: var(--color-text-muted);
  }

  .form__status[data-state='success'] {
    color: #1f8a3b;
  }

  .form__status[data-state='error'] {
    color: #c0352b;
  }

  @media (max-width: 980px) {
    .contact-hero__content {
      padding: calc(var(--header-space) + 2rem) 0 3rem;
    }

    .contact-help__grid {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }

    .contact-plan__grid {
      grid-template-columns: 1fr;
    }

    .contact-form__grid {
      grid-template-columns: 1fr;
    }
  }

  @media (max-width: 640px) {
    .contact-form {
      padding: 2.2rem 1.5rem;
    }

    .contact-form__envelope {
      width: min(300px, 90%);
    }

    .contact-form__success-text h3 {
      font-size: 1.6rem;
    }

    .contact-help__grid {
      grid-template-columns: 1fr;
    }
  }
</style>
