---
import BaseLayout from '../layouts/BaseLayout.astro'

const heroCategories = [
  {
    key: 'influencer',
    title: 'INFLUENCER PHOTOSHOOT',
    subtitle: 'Stand out from the crowd and captivate your followers with high-quality images',
  },
  {
    key: 'couple',
    title: 'COUPLE PICTURE TAKING',
    subtitle: 'Cherish your memories of Amalfi and your love forever with our tailored photo sessions',
  },
  {
    key: 'personal',
    title: 'PERSONAL PHOTO SHOOTING',
    subtitle:
      'The most picturesque locations and capture your personality in stunning, high-quality images',
  },
]

const heroImages = {
  influencer: [
    '/photoshootings/hero/influencer/3-berra-influenser-slider-slider.jpg',
    '/photoshootings/hero/influencer/bissa-ninfulenser-icecream.jpg',
    '/photoshootings/hero/influencer/tag-preview-photoshooting-in-ravello-2024-1024x766.webp',
  ],
  couple: [
    '/photoshootings/hero/couple/02-slideshow-regan-walk-ravello-love-1024x682.webp',
    '/photoshootings/hero/couple/couple-photoshooting-amalfi.jpg',
    '/photoshootings/hero/couple/katerina-kuznezova-praiano-2021-002.jpg',
  ],
  personal: [
    '/photoshootings/hero/personal/Masha-Minchuck-Amalfi-day.jpg',
    '/photoshootings/hero/personal/Silvia-Amalfi-day.jpg.jpg',
    '/photoshootings/hero/personal/iiana-photo-hero-atrani-hat-2-1024x680.webp',
  ],
}

const firstHeroImage = heroImages[heroCategories[0].key][0]

const pageTitle = 'Photoshootings — CristallPont Amalfi Day'
const pageDescription =
  'Photoshootings on the Amalfi Coast for couples, influencers, and solo travelers. Cinematic sessions in Amalfi, Atrani, Ravello, and Positano.'
const shareImageAlt = 'Amalfi Coast photoshoot hero scene'
const individualShoots = [
  {
    title: 'Amalfi Influencer Photoshoot',
    location: 'Amalfi',
    href: '/photoshootings/shifa',
    image: '/photoshootings/individual/Shifa/Hero.webp',
  },
  {
    title: 'The Perfect Gift to Yourself',
    location: 'Ravello',
    href: '/photoshootings/loreana',
    image: '/photoshootings/individual/Loreana/HERO-Loreana-photoshooting-in-amalfi-ravello-september-2025-38.webp',
  },
  {
    title: 'Morning Glow. True Atrani.',
    location: 'Atrani',
    href: '/photoshootings/lashada',
    image: '/photoshootings/individual/Lashada/HERO-Lashanda_Brown-August-2025_2.webp',
  },
  {
    title: 'Gifted Sunset Memories',
    location: 'Maiori',
    href: '/photoshootings/julietta',
    image: '/photoshootings/individual/Julietta/gallery1/Julietta_woods-Maiori-20245.webp',
  },
  {
    title: 'Ravello Light Elegance',
    location: 'Ravello',
    href: '/photoshootings/ravello-photoshooting',
    image: '/photoshootings/ravello-photoshooting/hero-Photoshooting-ravello-top-page-001.webp',
  },
  {
    title: "Ayuna's Photographic Memoir",
    location: 'Atrani',
    href: '/photoshootings/ayuna',
    image: '/photoshootings/ayuna/39-Ayuna-Atrani-2023.webp',
  },
  {
    title: 'Camelia: Beautiful Experience',
    location: 'Tramonti',
    href: '/photoshootings/camelia',
    image: '/photoshootings/camelia/4-camelia-photoshooting-moto.webp',
  },
  {
    title: 'Colours of Atrani',
    location: 'Atrani',
    href: '/photoshootings/concept-editorial',
    image: '/photoshootings/individual/iiana-photo-hero-atrani-hat-2-1024x680.webp',
  },
]

const coupleShoots = [
  {
    title: 'Ravello Romance (Taylor & Regan)',
    location: 'Ravello',
    href: '/photoshootings/regan-tay-ravello',
    image: '/photoshootings/regan-tay-ravello/HERO-regan-walk-ravello-love.webp',
  },
  {
    title: 'Symphony of Love',
    location: 'Atrani',
    href: '/photoshootings/olga-marat',
    image: '/photoshootings/olga-marat/28-olga-marat-atrani-2023.webp',
  },
]

const testimonials = [
  {
    quote:
      'I just wanted to say thank you again for making our families trip memorable. We have just spent a week with Taylor and Regan and the photos are incredible. They could not stop talking about your patience and how flexible you were. We maybe having an Amalfi wedding and you are top of our list. Thank you again',
    author: 'Estrallita Bloss',
    meta: 'Ravello, 2023',
  },
  {
    quote:
      "Greg's an excellent photographer. The angles, the lighting, the focus of the camera... all were amazing. He took such gorgeous photos of me on the Amalfi Coast that I'm obsessed with, and can't stop looking at. Definitely recommend to anyone looking for professionally done photos!",
    author: 'Bisaan Hanouneh',
    meta: 'Amalfi Coast, 2020',
  },
  {
    quote:
      'I express my deep gratitude to Gregory, for the fact that in addition to an exciting photo shoot, he gave us a fascinating tour and showed us those places that we could hardly find on our own. All love, kindness and amalfi mood☀️☀️☀️',
    author: 'Alex Dolgov',
    meta: 'Guest, 2020',
  },
  {
    quote:
      'Wonderful and rememberable journey, although it was only one night stay in the lovely and comfortable room with taste, taken care by the very kind and reliable host. The travel recommendations and even extra assist offered by Greg was really surprise.',
    author: '吴昊游',
    meta: 'Guest, 2019',
  },
]
---

<BaseLayout
  title={pageTitle}
  description={pageDescription}
  image={firstHeroImage}
  imageAlt={shareImageAlt}
>
  <section
    class="ps-hero hero--dark"
    data-sequence={JSON.stringify(
      heroCategories.map((cat) => ({
        title: cat.title,
        subtitle: cat.subtitle,
        images: heroImages[cat.key],
      }))
    )}
  >
    <div class="ps-hero__bg">
      <div
        class="ps-hero__layer is-active"
        style={`background-image:url('${firstHeroImage}')`}
      ></div>
      <div class="ps-hero__layer"></div>
    </div>
    <div class="ps-hero__content">
      <div class="ps-hero__text">
        <h1 id="ps-title">{heroCategories[0].title}</h1>
        <p id="ps-subtitle">{heroCategories[0].subtitle}</p>
        <div class="ps-hero__dots" aria-hidden="true"></div>
        <a class="button" href="/contact">Book now!</a>
      </div>
    </div>
  </section>

  <script is:inline>
    ;(() => {
      const heroEl = document.querySelector('.ps-hero')
      if (!heroEl) return
      const sequence = JSON.parse(heroEl.dataset.sequence || '[]')
      const layers = Array.from(document.querySelectorAll('.ps-hero__layer'))
      const titleEl = document.getElementById('ps-title')
      const subtitleEl = document.getElementById('ps-subtitle')
      const dotsWrap = document.querySelector('.ps-hero__dots')

      let catIndex = 0
      let imgIndex = -1
      let activeLayer = 0

      const IMAGE_DURATION = 3000
      const zoomClass = 'is-zoom'

      const preload = (src) => {
        const img = new Image()
        img.src = src
      }

      const setupDots = (count) => {
        if (!dotsWrap) return
        dotsWrap.innerHTML = ''
        for (let i = 0; i < count; i += 1) {
          const dot = document.createElement('span')
          dot.className = 'ps-hero__dot'
          dotsWrap.appendChild(dot)
        }
      }

      const updateDots = (index) => {
        if (!dotsWrap) return
        const dots = dotsWrap.querySelectorAll('.ps-hero__dot')
        dots.forEach((dot, i) => {
          dot.classList.toggle('is-active', i === index)
        })
      }

      const setText = (cat) => {
        titleEl.classList.add('is-fading')
        subtitleEl.classList.add('is-fading')
        window.setTimeout(() => {
          titleEl.textContent = cat.title
          subtitleEl.textContent = cat.subtitle
          titleEl.classList.remove('is-fading')
          subtitleEl.classList.remove('is-fading')
        }, 300)
      }

      const showImage = (src) => {
        const nextLayer = layers[1 - activeLayer]
        const currentLayer = layers[activeLayer]

        nextLayer.style.backgroundImage = `url(\"${src}\")`
        nextLayer.classList.add('is-active')
        nextLayer.classList.remove(zoomClass)
        void nextLayer.offsetWidth
        nextLayer.classList.add(zoomClass)

        currentLayer.classList.remove('is-active')

        activeLayer = 1 - activeLayer
      }

      const step = () => {
        if (!sequence.length) return
        const cat = sequence[catIndex]
        imgIndex = (imgIndex + 1) % cat.images.length

        if (imgIndex === 0) {
          setText(cat)
          setupDots(cat.images.length)
        }

        showImage(cat.images[imgIndex])
        updateDots(imgIndex)

        const nextImg = cat.images[(imgIndex + 1) % cat.images.length]
        preload(nextImg)

        if (imgIndex === cat.images.length - 1) {
          catIndex = (catIndex + 1) % sequence.length
        }
      }

      sequence.forEach((cat) => cat.images.forEach(preload))
      setupDots(sequence[0]?.images?.length || 0)
      step()
      window.setInterval(step, IMAGE_DURATION)
    })()
  </script>

  <section class="section section--individual">
    <div class="container">
      <div class="cat-header">
        <h1>
          Individual <span class="accent-italic">Sessions</span>
        </h1>
        <p class="cat-header__desc">
          Every solo session is a private journey through the Amalfi Coast's most cinematic corners.
          No rush, no groups — just you, golden light, and a story waiting to be told.
        </p>
      </div>
      <div class="shoot-grid">
        {individualShoots.map((item) => (
          <a class="shoot-card" href={item.href}>
            <div class="shoot-card__media">
              <img src={item.image} alt={item.title} loading="lazy" decoding="async" />
            </div>
            <div class="shoot-card__overlay">
              <h3>{item.title}</h3>
              <span><i class="bi bi-geo-alt"></i> {item.location}</span>
            </div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <section class="section testimonials">
    <div class="container">
      <div class="cat-header cat-header--center">
        <h1>
          What Guests <span class="accent-italic">Say</span>
        </h1>
        <p class="cat-header__desc">
          Real stories from real people who trusted us with their most precious moments on the coast.
        </p>
      </div>
      <div class="testimonials__grid">
        {testimonials.map((item) => (
          <article class="card testimonial">
            <div class="testimonial__stars" aria-label="5 stars">
              <i class="bi bi-star-fill"></i>
              <i class="bi bi-star-fill"></i>
              <i class="bi bi-star-fill"></i>
              <i class="bi bi-star-fill"></i>
              <i class="bi bi-star-fill"></i>
            </div>
            <blockquote class="testimonial__quote">{item.quote}</blockquote>
            <footer class="testimonial__footer">
              <strong>{item.author}</strong>
              <span>{item.meta}</span>
            </footer>
          </article>
        ))}
      </div>
    </div>
  </section>

  <section class="section section--couples">
    <div class="container">
      <div class="cat-header">
        <h1>
          Couple <span class="accent-italic">Sessions</span>
        </h1>
        <p class="cat-header__desc">
          Two people, one coast, and light that makes everything feel timeless.
          Whether it's an engagement, anniversary, or simply being in love — the Amalfi Coast
          turns every glance into a frame worth keeping forever.
        </p>
      </div>
      <div class="shoot-grid shoot-grid--couple">
        {coupleShoots.map((item) => (
          <a class="shoot-card shoot-card--wide" href={item.href}>
            <div class="shoot-card__media">
              <img src={item.image} alt={item.title} loading="lazy" decoding="async" />
            </div>
            <div class="shoot-card__overlay">
              <h3>{item.title}</h3>
              <span><i class="bi bi-geo-alt"></i> {item.location}</span>
            </div>
          </a>
        ))}
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  .ps-hero {
    min-height: 100vh;
    padding-top: 0;
    position: relative;
    color: #ffffff;
    display: flex;
    align-items: center;
    overflow: hidden;
    box-sizing: border-box;
  }

  .ps-hero__bg {
    position: absolute;
    inset: 0;
    background: #0f1115;
  }

  .ps-hero__layer {
    position: absolute;
    inset: 0;
    background-size: cover;
    background-position: center;
    opacity: 0;
    transition: opacity 500ms ease;
    filter: brightness(0.65);
    will-change: transform, opacity;
  }

  .ps-hero__layer.is-active {
    opacity: 1;
  }

  .ps-hero__layer.is-zoom {
    animation: ps-zoom 2s ease-out forwards;
  }

  .ps-hero__content {
    position: relative;
    z-index: 2;
    width: 100%;
    max-width: var(--container-max);
    margin: 0 auto;
    padding: 0 1.5rem;
  }

  .ps-hero__text {
    max-width: 720px;
    text-align: left;
  }

  .ps-hero__text h1 {
    font-size: clamp(2.6rem, 5vw, 4.2rem);
    transition: opacity 0.3s ease, transform 0.3s ease;
  }

  .ps-hero__text p {
    color: rgba(255, 255, 255, 0.8);
    font-size: 1.1rem;
    transition: opacity 0.3s ease, transform 0.3s ease;
  }

  .ps-hero__text h1.is-fading,
  .ps-hero__text p.is-fading {
    opacity: 0.4;
    transform: translateY(6px);
    transition: opacity 0.3s ease, transform 0.3s ease;
  }

  .ps-hero__dots {
    display: flex;
    gap: 0.5rem;
    margin: 1.2rem 0 0.4rem;
  }

  .ps-hero__dot {
    width: 8px;
    height: 8px;
    border-radius: 999px;
    background: rgba(255, 255, 255, 0.35);
    transition: transform 0.3s ease, background 0.3s ease;
  }

  .ps-hero__dot.is-active {
    background: #ffffff;
    transform: scale(1.3);
  }

  .ps-hero__text .button {
    margin-top: 1.5rem;
  }

  @keyframes ps-zoom {
    from {
      transform: scale(1.005) translate3d(0, 0, 0);
    }
    to {
      transform: scale(1.05) translate3d(-0.5%, -0.5%, 0);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .ps-hero__layer {
      transition: none;
      animation: none !important;
    }
  }

  /* ── Category header ── */
  .cat-header {
    margin-bottom: 3rem;
  }

  .cat-header h1 {
    font-size: clamp(2.2rem, 4vw, 3.4rem);
    margin-bottom: 0.8rem;
  }

  .cat-header__desc {
    max-width: 640px;
    font-size: 1.05rem;
    line-height: 1.75;
    color: var(--color-text-muted);
  }

  /* ── Shoot card grid ── */
  .shoot-grid {
    display: grid;
    gap: 1.5rem;
    grid-template-columns: repeat(4, minmax(0, 1fr));
  }

  .shoot-grid--couple {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .shoot-card {
    position: relative;
    overflow: hidden;
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-soft);
    height: 380px;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    display: block;
    text-decoration: none;
  }

  .shoot-card:hover {
    transform: translateY(-6px);
    box-shadow: var(--shadow-lift);
    text-decoration: none;
  }

  .shoot-card--wide {
    height: 440px;
  }

  .shoot-card__media {
    position: absolute;
    inset: 0;
    background-color: rgba(16, 16, 16, 0.35);
  }

  .shoot-card__media img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    transition: transform 0.4s ease;
  }

  .shoot-card:hover .shoot-card__media img {
    transform: scale(1.06);
  }

  .shoot-card__overlay {
    position: absolute;
    inset: auto 0 0;
    padding: 1.5rem;
    background: linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.6) 100%);
    color: #ffffff;
    transition: padding-bottom 0.3s ease;
  }

  .shoot-card:hover .shoot-card__overlay {
    padding-bottom: 1.8rem;
  }

  .shoot-card__overlay h3 {
    font-family: var(--font-display);
    font-size: 1.1rem;
    margin: 0 0 0.3rem;
    color: #ffffff;
  }

  .shoot-card__overlay span {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    font-size: 0.85rem;
    opacity: 0.85;
    color: #ffffff;
  }

  @media (max-width: 1024px) {
    .shoot-grid {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
    .shoot-grid--couple {
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
  }

  @media (max-width: 640px) {
    .shoot-grid,
    .shoot-grid--couple {
      grid-template-columns: 1fr;
    }
    .shoot-card {
      height: 320px;
    }
    .shoot-card--wide {
      height: 360px;
    }
  }

  /* ── Centered variant for cat-header ── */
  .cat-header--center {
    text-align: center;
  }

  .cat-header--center .cat-header__desc {
    margin-inline: auto;
  }

  /* ── Testimonials ── */
  .testimonials {
    background: var(--color-surface);
  }

  .testimonials__grid {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 1.5rem;
  }

  .testimonial {
    padding: 2rem;
    display: flex;
    flex-direction: column;
    gap: 0;
  }

  .testimonial__stars {
    display: flex;
    gap: 0.2rem;
    margin-bottom: 1rem;
    color: var(--color-accent-2);
    font-size: 0.9rem;
  }

  .testimonial__quote {
    margin: 0;
    padding: 0;
    border: none;
    font-family: var(--font-body);
    font-size: 0.95rem;
    line-height: 1.75;
    color: var(--color-text-muted);
    font-style: italic;
    flex: 1;
  }

  .testimonial__footer {
    margin-top: 1.2rem;
    padding-top: 1rem;
    border-top: 1px solid var(--color-border);
  }

  .testimonial__footer strong {
    display: block;
    font-family: var(--font-display);
    font-size: 0.95rem;
    color: var(--color-text);
    margin-bottom: 0.15rem;
  }

  .testimonial__footer span {
    color: var(--color-text-muted);
    font-size: 0.8rem;
  }

  @media (max-width: 768px) {
    .testimonials__grid {
      grid-template-columns: 1fr;
    }
  }

  @media (max-width: 720px) {
    .ps-hero__text {
      max-width: 100%;
    }
  }
</style>
